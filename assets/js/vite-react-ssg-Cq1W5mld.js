import{$ as f,j as m}from"./react-BLd8ueWf.js";import{c as y}from"./react-dom-DChN0zLA.js";import{q as w}from"./react-helmet-async-DyvokwX7.js";function g(e){return document.readyState==="loading"?new Promise(t=>{document.addEventListener("DOMContentLoaded",()=>t(e))}):Promise.resolve(e)}function x(e){try{return JSON.parse(e||"{}")}catch(t){return console.error("[SSG] On state deserialization -",t,e),{}}}function E(e,t,u={}){const{transformState:n,rootContainer:a="#root",ssrWhenDev:_,getStyleCollector:p=null}=u,d=typeof window<"u";async function l(r=!1,s){const o=[],i={isClient:d,onSSRAppRendered:r?()=>{}:c=>o.push(c),triggerOnSSRAppRendered:()=>Promise.all(o.map(c=>c())),initialState:{},transformState:n,routePath:s,getStyleCollector:p,routes:void 0,routerOptions:void 0,base:"/",app:e,routerType:"single-page"};r&&(await g(),i.initialState=(n==null?void 0:n(window.__INITIAL_STATE__||{}))||x(window.__INITIAL_STATE__)),await(t==null?void 0:t(i));const R=i.initialState;return{...i,initialState:R}}return d&&(async()=>{const r=typeof a=="string"?document.querySelector(a):a;if(!r){typeof $jsdom>"u"&&console.warn("[vite-react-ssg] Root container not found.");return}await l(!0);const s=m.jsx(w,{children:e}),o=document.querySelector("[data-server-rendered=true]")!==null;f.startTransition(()=>{y.hydrateRoot(r,s)})})(),l}export{E as V};
